var button=document.getElementById("nav_mobile_button"),nav=document.getElementById("nav");button.addEventListener("click",function(){"flex"==nav.style.display?nav.style.display="none":nav.style.display="flex"});const error=document.getElementById("error_msg"),inputField=document.getElementById("input_form"),container=document.querySelector(".short_links");function URLIsValid(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(e)}function Validate(){return error.innerHTML="",URLIsValid(inputField.value)?(error.innerHTML="",error.style.display="none",inputField.classList.remove("error"),!0):(error.innerHTML="Please add a link",error.style.display="block",inputField.classList.add("error"),inputField.value="",inputField.style.borderColor="hsl(0, 87%, 67%)",!1)}function shortenLink(e){e.preventDefault(),Validate(),Validate()&&fetch("https://rel.ink/api/links/",{method:"POST",body:JSON.stringify({url:inputField.value}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e),createShortLink(inputField.value,e.hashid)}).catch(e=>console.log(e))}function createShortLink(e,t){var n="https://rel.ink/"+t;console.log(e),console.log(n),store({link:e,shortLink:n})}function store(e){let t=get();t.push(e),console.log(t),localStorage.setItem("items",JSON.stringify(t)),getLinks()}function get(){let e;return e=null==localStorage.getItem("items")?[]:JSON.parse(localStorage.getItem("items"))}function showShortLinks(e,t){container.insertAdjacentHTML("afterbegin",`\n    <div class="item">\n      <a href="${e}" class="item_link">${e}</a>\n      <div class="item_container">\n        <a href="${t}" id="shortLink" class="item_shortlink">${t}</a>\n        <button id="copy" class="button button_form">Copy</button>\n      </div>\n    </div>\n    `)}function getLinks(){container.innerHTML="",get().forEach(e=>{console.log(e),showShortLinks(e.link,e.shortLink),setCopyBtn()})}function setCopyBtn(){document.querySelectorAll("#copy").forEach(e=>e.addEventListener("click",copyLink))}function copyLink(e){let t=document.createElement("textarea");t.value=e.target.previousSibling.previousSibling.innerText,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),e.target.innerHTML="Copied!",e.target.classList.add("button_copied")}document.getElementById("form").addEventListener("submit",shortenLink),getLinks();